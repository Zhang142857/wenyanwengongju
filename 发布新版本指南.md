# ğŸ“¦ å‘å¸ƒæ–°ç‰ˆæœ¬æŒ‡å—

## ğŸš€ å¿«é€Ÿå‘å¸ƒæµç¨‹

### 1ï¸âƒ£ æ›´æ–°ç‰ˆæœ¬å·

ç¼–è¾‘ `package.json`:
```json
{
  "version": "1.0.5"
}
```

### 2ï¸âƒ£ æ›´æ–° CHANGELOG

ç¼–è¾‘ `CHANGELOG.md`ï¼Œæ·»åŠ æ–°ç‰ˆæœ¬çš„æ›´æ–°è¯´æ˜ã€‚

### 3ï¸âƒ£ æ‰“åŒ…åº”ç”¨

```bash
npm run build
npm run electron:build:win
```

### 4ï¸âƒ£ å‘å¸ƒåˆ° GitHub

```powershell
$env:GITHUB_TOKEN = "your_github_token"
npm run release:github
```

å‘å¸ƒå®Œæˆåï¼Œç”¨æˆ·å°±èƒ½é€šè¿‡æ£€æŸ¥æ›´æ–°è·å–æ–°ç‰ˆæœ¬ã€‚

---

## ğŸ“‹ å®Œæ•´å‘½ä»¤å‚è€ƒ

```bash
# æ‰“åŒ…åº”ç”¨
npm run electron:build:win

# å‘å¸ƒåˆ° GitHubï¼ˆéœ€è¦è®¾ç½® GITHUB_TOKENï¼‰
npm run release:github

# æµ‹è¯•æ›´æ–°ç³»ç»Ÿ
npm run test:update

# éƒ¨ç½²æ›´æ–°æœåŠ¡
cd update && npx wrangler deploy
```

---

## ğŸ”§ æ›´æ–°ç³»ç»Ÿæ¶æ„

```
ç”¨æˆ·åº”ç”¨ â”€â”€â–¶ Cloudflare Workers â”€â”€â–¶ GitHub Releases
              (API + ä¸‹è½½ä»£ç†)        (æ–‡ä»¶å­˜å‚¨)
```

- **Cloudflare Workers**: æä¾› API æ¥å£ï¼Œä»£ç†ä¸‹è½½ï¼ˆè§£å†³å›½å†…è®¿é—®é—®é¢˜ï¼‰
- **GitHub Releases**: å­˜å‚¨æ›´æ–°åŒ…æ–‡ä»¶ï¼ˆæœ€å¤§ 2GBï¼‰

---

## ğŸ§ª æµ‹è¯•æ›´æ–°ç³»ç»Ÿ

```bash
npm run test:update
```

æµ‹è¯•å†…å®¹ï¼š
- âœ… å¥åº·æ£€æŸ¥
- âœ… æ£€æŸ¥æ›´æ–°ï¼ˆæœ‰/æ— æ›´æ–°ï¼‰
- âœ… è·å–ç‰ˆæœ¬åˆ—è¡¨
- âœ… ä¸‹è½½é“¾æ¥å¯ç”¨æ€§
- âœ… å‚æ•°éªŒè¯
- âœ… 404 å¤„ç†

---

## ğŸ†˜ ç´§æ€¥æ¢å¤

### åœºæ™¯ 1: æ›´æ–°æœåŠ¡ä¸å¯ç”¨

```bash
cd update
npx wrangler deploy
```

### åœºæ™¯ 2: å‘å¸ƒäº†æœ‰é—®é¢˜çš„ç‰ˆæœ¬

1. åœ¨ GitHub Releases åˆ é™¤æœ‰é—®é¢˜çš„ç‰ˆæœ¬
2. æˆ–å‘å¸ƒæ–°çš„ä¿®å¤ç‰ˆæœ¬

### åœºæ™¯ 3: éœ€è¦å›æ»šç‰ˆæœ¬

1. åœ¨ GitHub å°†æ—§ç‰ˆæœ¬è®¾ä¸º Latest Release
2. æˆ–åˆ é™¤æ–°ç‰ˆæœ¬çš„ Release

---

## ğŸ“¡ API æ¥å£

| æ¥å£ | è¯´æ˜ |
|------|------|
| `GET /health` | å¥åº·æ£€æŸ¥ |
| `GET /api/update/check?current_version=1.0.0&platform=windows` | æ£€æŸ¥æ›´æ–° |
| `GET /api/update/releases` | è·å–ç‰ˆæœ¬åˆ—è¡¨ |
| `GET /api/update/download/{version}/{platform}` | ä¸‹è½½æ›´æ–° |

API åœ°å€: `https://update.156658.xyz`
