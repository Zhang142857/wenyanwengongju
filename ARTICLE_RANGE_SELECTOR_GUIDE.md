# 文章区间选择器使用指南

## 功能概述

文章区间选择器是自动出题页面中考点加权编辑面板的增强功能，提供了更直观的可视化区间选择体验。

## 界面布局

### 上方：权重曲线图
- 显示所有选中文章的权重分布
- 节点代表每篇文章
- 曲线高度表示权重大小（0-100%）

### 下方：区间选择轴
- 横轴显示所有文章的序号
- 可以通过拖拽创建多个区间
- 区间会自动合并显示在上方的权重图中

## 操作说明

### 1. 创建区间
**操作**：在下方的区间选择轴上按住鼠标左键拖动

**效果**：
- 拖动时会实时显示正在创建的区间（半透明）
- 释放鼠标后区间创建完成
- 区间会以不同颜色显示（自动循环6种颜色）

**示例**：
```
拖动从文章3到文章8 → 创建一个包含文章3-8的区间
```

### 2. 调整区间大小
**操作**：鼠标移到已有区间的左边缘或右边缘，光标会变成双向箭头，按住左键拖动

**效果**：
- 左边缘：调整区间起始位置
- 右边缘：调整区间结束位置
- 拖动时实时更新区间范围

**示例**：
```
原区间：文章3-8
拖动左边缘到文章5 → 新区间：文章5-8
拖动右边缘到文章10 → 新区间：文章3-10
```

### 3. 删除区间
**操作**：在区间上点击鼠标右键，选择"删除区间"

**效果**：
- 弹出右键菜单
- 点击"删除区间"后该区间被移除
- 对应文章的选中状态自动更新

### 4. 缩放视图
**操作**：在图表区域滚动鼠标滚轮

**效果**：
- 向上滚动：放大视图（最大3倍）
- 向下滚动：缩小视图（最小0.5倍）
- 缩放后可以更精确地操作区间
- 滚轮事件不会触发页面滚动

### 4.5. 自动滚动
**操作**：拖拽区间或调整边界时，将鼠标移到容器边缘

**效果**：
- 鼠标靠近左边缘：视图自动向左滚动
- 鼠标靠近右边缘：视图自动向右滚动
- 滚动速度固定，方便精确操作
- 释放鼠标或移开边缘时停止滚动

### 5. 调整文章权重
**操作**：在上方权重曲线图中拖拽节点

**效果**：
- 上下拖动节点调整该文章的权重
- 权重范围：0-100%
- 曲线会平滑过渡

### 6. 切换文章选中状态
**操作**：点击上方权重曲线图中的节点

**效果**：
- 已选中（蓝色）→ 未选中（灰色）
- 未选中（灰色）→ 已选中（蓝色）
- 不影响区间设置

## 多区间管理

### 区间合并显示
- 下方可以创建多个独立的区间
- 所有区间会自动合并显示在上方的权重图中
- 重叠的区间会自动去重

**示例**：
```
区间1：文章1-5（绿色）
区间2：文章4-8（蓝色）
区间3：文章10-12（橙色）

上方显示：文章1-8和10-12被选中
```

### 区间颜色
系统自动为每个区间分配颜色，循环使用以下6种颜色：
1. 绿色 (#4CAF50)
2. 蓝色 (#2196F3)
3. 橙色 (#FF9800)
4. 紫色 (#9C27B0)
5. 红色 (#F44336)
6. 青色 (#00BCD4)

## 动画效果

所有操作都配有流畅的动画：

- **节点拖拽**：0.2秒平滑过渡
- **权重曲线**：0.3秒平滑变化
- **区间悬停**：0.2秒透明度变化
- **右键菜单**：0.15秒淡入动画
- **缩放平移**：0.1秒平滑移动

## 使用技巧

### 1. 快速选择连续文章
使用下方的区间选择轴，一次拖拽即可选中多篇连续的文章，比逐个点击节点更高效。

### 2. 精确调整区间
放大视图（滚轮向上）后，可以更精确地调整区间边界，避免误操作。

### 3. 多区间组合
可以创建多个不连续的区间，灵活组合不同的文章范围，适合复杂的出题需求。

### 4. 快速清除区间
右键点击区间即可快速删除，无需逐个取消文章选中状态。

### 5. 权重微调
在上方权重图中拖拽节点，可以在选中文章的同时精确调整每篇文章的权重。

## 常见问题

### Q: 如何清除所有区间？
A: 逐个右键点击区间并选择"删除区间"，或者重新选择考察范围。

### Q: 区间可以重叠吗？
A: 可以。重叠的区间会自动合并，不会重复计算。

### Q: 如何查看区间包含哪些文章？
A: 鼠标悬停在区间上，会显示起始和结束文章的标题（前2个字）。

### Q: 文章标题为什么是斜的？
A: 为了避免文章过多时标题重叠，标题以-45度角显示，既节省空间又保持可读性。

### Q: 缩放后如何恢复原始大小？
A: 继续滚动鼠标滚轮，缩放倍数会在0.5-3倍之间循环。

### Q: 区间选择会影响权重设置吗？
A: 区间选择只影响文章的选中状态（included），不会改变已设置的权重值。

## 最佳实践

1. **先选区间，后调权重**：先用区间选择轴快速选中文章范围，再在权重图中精细调整权重。

2. **使用多区间**：对于不连续的文章范围，创建多个区间比手动点击更直观。

3. **适当缩放**：文章数量多时，适当放大视图可以提高操作精度。

4. **定期检查**：在上方权重图中查看最终的选中状态和权重分布，确保符合预期。

5. **灵活组合**：区间选择和节点点击可以配合使用，实现更灵活的文章选择。

6. **利用自动滚动**：拖拽长区间时，将鼠标移到边缘触发自动滚动，无需手动调整视图。

## 技术特性

- **响应式设计**：自动适应不同数量的文章
- **性能优化**：支持大量文章的流畅操作
- **状态同步**：区间选择和权重设置实时同步
- **撤销友好**：所有操作都可以通过删除区间或重新选择来撤销
- **视觉反馈**：丰富的悬停、拖拽、选中状态提示

## 更新日志

### v1.1.0 (2024-12-06)
- 🐛 修复文章标题重叠问题（标题旋转-45度显示）
- ✨ 新增自动滚动功能（拖动到边缘时自动平移）
- 🎨 优化刻度显示（文章过多时自动稀疏显示）
- 🎨 改进滚动条样式
- 🔧 滚轮事件阻止页面滚动
- 🎨 增加底部留白，避免标题被截断

### v1.0.0 (2024-12-06)
- ✨ 新增区间选择轴
- ✨ 支持拖拽创建区间
- ✨ 支持拖拽调整区间边界
- ✨ 支持右键删除区间
- ✨ 支持滚轮缩放
- ✨ 多区间自动合并显示
- ✨ 流畅的动画效果
- ✨ 丰富的视觉反馈
