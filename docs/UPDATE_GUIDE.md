# 自动更新指南

## 概述

文言文工具内置了自动更新功能，可以帮助您保持应用程序的最新版本，获取最新的功能和修复。

## 更新流程

### 1. 检查更新

应用程序会在以下时机自动检查更新：
- 启动后30秒内
- 运行期间每4小时检查一次

您也可以手动检查更新（如果应用提供了相关按钮）。

### 2. 更新通知

当发现新版本时，应用程序会显示一个非侵入式的通知横幅，包含：
- 新版本号
- 更新内容（更新日志）
- "立即更新"按钮
- "稍后"按钮

如果您选择"稍后"，通知会在24小时后再次显示。

### 3. 下载更新

点击"立即更新"后，应用程序会：
1. 检查磁盘空间是否充足
2. 下载更新包
3. 显示下载进度（百分比、速度、剩余时间）

### 4. 安装更新

下载完成后，应用程序会：
1. 验证下载文件的完整性
2. 创建当前版本的备份
3. 解压并安装更新
4. 显示3秒倒计时
5. 自动重启应用程序

### 5. 数据保护

更新过程中，您的数据是安全的：
- 用户数据（配置、数据库等）不会被修改或删除
- 更新前会自动创建备份
- 如果更新失败，会自动恢复到之前的版本

## 故障排除

### 网络错误

如果遇到网络错误：
1. 检查网络连接是否正常
2. 如果使用代理，请检查代理设置
3. 稍后重试更新

### 磁盘空间不足

如果提示磁盘空间不足：
1. 清理磁盘空间，删除不需要的文件
2. 确保有足够的可用空间（至少需要更新包大小的3倍）
3. 重新尝试更新

### 权限错误

如果遇到权限错误：
1. 以管理员身份运行应用程序
2. 检查应用程序安装目录的权限设置
3. 确保没有其他程序占用相关文件

### 文件校验失败

如果下载的文件校验失败：
1. 重新下载更新包
2. 检查网络连接稳定性
3. 如果问题持续，请联系技术支持

### 更新失败后恢复

如果更新失败，应用程序会自动尝试恢复：
1. 检测到更新失败
2. 从备份恢复文件
3. 重启应用程序

如果自动恢复失败，请手动恢复：
1. 关闭应用程序
2. 找到备份目录（在用户数据目录的 `backups` 文件夹中）
3. 将备份文件复制到应用程序安装目录
4. 重新启动应用程序

## 常见问题

### Q: 更新会删除我的数据吗？
A: 不会。更新过程会保护您的所有用户数据，包括配置文件和数据库。

### Q: 可以跳过某个版本吗？
A: 可以。点击"稍后"按钮可以暂时跳过更新，24小时后会再次提醒。

### Q: 更新需要多长时间？
A: 取决于您的网络速度和更新包大小。通常几分钟内即可完成。

### Q: 更新失败了怎么办？
A: 应用程序会自动尝试恢复。如果自动恢复失败，请参考上面的手动恢复步骤。

### Q: 可以禁用自动更新吗？
A: 目前版本不支持禁用自动更新检查，但您可以选择不安装更新。

## 技术支持

如果您遇到无法解决的问题，请联系技术支持并提供以下信息：
- 当前应用程序版本
- 错误信息截图
- 操作系统版本
- 问题发生的具体步骤
